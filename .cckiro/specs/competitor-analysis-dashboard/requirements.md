# 同名競合分析ダッシュボード - 要件定義書

## 1. 概要

### 1.1 目的
ユーザーが入力した名前でGoogle検索を実行し、上位結果を分析して競合状況を可視化する。同名の人物や関連サイトの強さを定量評価し、勝機のある領域を特定する個人名SEO支援システム。

### 1.2 対象ユーザー
- 個人ブランディングを強化したい個人
- オンライン上での検索結果を改善したい専門家
- 同名の競合状況を把握したいフリーランサー・起業家

### 1.3 成功指標
- ユーザーが30秒以内に競合状況を把握できる
- 具体的なアクション提案により、SEO改善の方向性が明確になる
- 分析結果の精度が80%以上である

## 2. 機能要件

### 2.1 検索結果取得・分析機能

#### 2.1.1 入力項目
- **必須項目**:
  - 分析対象の名前（姓名）
- **オプション項目**:
  - 地域指定（日本、東京都など）
  - 取得件数（10-20件、デフォルト10件）

#### 2.1.2 処理内容
- Google Custom Search API による検索実行
- 上位10-20件の検索結果取得
- 各URLのメタデータ抽出（タイトル、ディスクリプション）
- ドメイン情報の取得

#### 2.1.3 分析項目
- 同名人物の特定（AI/ルールベース）
- ドメインオーソリティの測定
- コンテンツタイプの分類:
  - `person`: 個人のプロフィールページ
  - `news`: ニュース記事
  - `social`: SNSプロフィール
  - `other`: その他のコンテンツ

### 2.2 競合スコアリング機能

#### 2.2.1 スコアリング対象
```typescript
interface CompetitorScore {
  rank: number;                    // 検索順位（1-20）
  url: string;                    // 対象URL
  title: string;                  // ページタイトル
  domain: string;                 // ドメイン名
  domainAuthority: number;        // ドメインオーソリティ（0-100）
  contentType: 'person' | 'news' | 'social' | 'other';
  competitiveStrength: 'high' | 'medium' | 'low';  // 競合強度
  isTargetPerson: boolean;        // 本人のコンテンツかどうか
  lastUpdated?: Date;            // 最終更新日（取得可能な場合）
}
```

#### 2.2.2 競合強度の算出ロジック
- **High（高）**: ドメインオーソリティ 70以上 OR Wikipedia/大手ニュースサイト
- **Medium（中）**: ドメインオーソリティ 30-70 OR 定期更新されるサイト
- **Low（低）**: ドメインオーソリティ 30未満 OR 更新が1年以上停止

### 2.3 勝機領域特定機能

#### 2.3.1 機会分析項目
- 競合強度が「Low」の検索結果ポジション
- ドメインオーソリティが30未満の競合
- 1年以上更新されていない古いコンテンツ
- 対象者本人のコンテンツが存在しない上位ポジション

#### 2.3.2 推奨アクション
- 即座に取り組める機会（競合強度Low）
- 中期的な取り組み対象（競合強度Medium）
- 長期的な戦略対象（競合強度High）

## 3. ユーザーインターフェース要件

### 3.1 画面構成
1. **検索フォーム**:
   - 名前入力フィールド（必須）
   - 地域選択ドロップダウン（オプション）
   - 取得件数スライダー（10-20件）
   - 分析開始ボタン

2. **結果サマリー**:
   - 分析対象名の表示
   - 全体的な競合状況（強・中・弱の割合）
   - 即座に取り組める機会の件数

3. **詳細分析表**:
   - 検索順位
   - サイトタイトル・URL
   - ドメインオーソリティスコア
   - 競合強度（色分け表示）
   - コンテンツタイプアイコン

4. **勝機レーダー**:
   - 機会領域の可視化
   - 競合強度の分布図
   - アクション優先度の表示

### 3.2 デザイン要件
- **カラーパレット**:
  - High競合: 赤系（#EF4444）
  - Medium競合: 黄系（#F59E0B）
  - Low競合: 緑系（#10B981）
- **レスポンシブ対応**: モバイル・タブレット・デスクトップ
- **アクセシビリティ**: WCAG 2.1 AA準拠

### 3.3 インタラクション要件
- 分析処理中はプログレスバー表示
- 各検索結果はクリックで詳細表示
- 結果データのCSVエクスポート機能
- 分析結果の保存・履歴機能

## 4. 技術要件

### 4.1 API要件
- **エンドポイント**: POST /api/search
- **レスポンス時間**: 平均15秒以内
- **同時リクエスト**: 最大10件まで
- **エラーハンドリング**: APIレート制限・ネットワークエラー対応

### 4.2 データ処理要件
- Google Custom Search API の利用
- ドメインオーソリティ取得（Moz API または代替手段）
- 結果のキャッシュ機能（24時間）
- 非同期処理による応答性確保

### 4.3 セキュリティ要件
- APIキーの適切な管理
- レート制限による悪用防止
- 入力値のサニタイゼーション
- HTTPS通信の必須化

## 5. 非機能要件

### 5.1 パフォーマンス要件
- 初回分析: 15秒以内
- キャッシュ済み結果: 3秒以内
- 同時ユーザー: 50人まで対応

### 5.2 可用性要件
- 稼働率: 99.0%以上
- API障害時のフォールバック機能
- メンテナンス時間: 月1回、30分以内

### 5.3 拡張性要件
- 検索結果件数の増加対応
- 新しいコンテンツタイプの追加
- 分析項目の拡張可能性

## 6. 制約事項

### 6.1 技術的制約
- Google Custom Search API の制限（1日100クエリ）
- Moz API の制限（月10,000クエリ）
- Next.js App Router の仕様に準拠

### 6.2 ビジネス制約
- 無料版では1日3回まで分析実行
- 有料版（将来実装）で制限解除
- 日本語の名前を主要対象とする

## 7. 受け入れ基準

### 7.1 機能的受け入れ基準
- ✅ 名前を入力して「分析開始」を押すと、検索結果が取得できる
- ✅ 取得した結果に対して、競合強度が正しく分類される
- ✅ ドメインオーソリティが適切に表示される
- ✅ 勝機のある領域が明確に特定される
- ✅ 具体的なアクション提案が表示される

### 7.2 非機能的受け入れ基準
- ✅ 分析処理が15秒以内に完了する
- ✅ モバイル・デスクトップで適切に表示される
- ✅ エラー発生時に適切なメッセージが表示される
- ✅ 分析結果がCSV形式でエクスポートできる

## 8. 今後の拡張予定

### 8.1 Phase 2 機能
- 複数名前の一括分析
- 競合の変動追跡機能
- SNS連携での自動更新通知

### 8.2 Phase 3 機能
- AI による改善提案の自動生成
- 競合サイトの詳細分析機能
- パーソナライズされたダッシュボード